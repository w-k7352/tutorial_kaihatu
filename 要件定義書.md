要件定義 v1.0 — 1画面「ToDo＋期限管理」ミニWebアプリ（フロントのみ / localStorage）
1. 目的

学習目的：要件定義→基本設計→詳細設計→実装→テスト→リリースの一連を、最小コストで体験できる教材用Webアプリを提供する。

業務目的：個人がその日の作業を1画面で登録・整理・確認し、生産性を向上させる。

2. スコープ / 非スコープ

スコープ

単一HTMLで動作するフロントエンドのみのSPA（HTML/CSS/Vanilla JS）。

データ永続化はブラウザlocalStorage（端末内、ユーザ単位）。

非スコープ

サーバー・認証・多人数共有・クラウドDB・バックエンドAPI。

通知（メール/プッシュ）、ユーザ管理、PWA化（任意拡張候補に回す）。

3. 想定ユーザ / 前提

ユーザ：個人（PC/スマホの単一端末で利用）。

前提：最新のモダンブラウザ（Chrome/Edge/Firefox/Safariの現行版）を利用。

4. ユースケース（UC）

UC-01：タスクを新規登録する（タイトル必須、期限任意、タグ任意、初期ステータス=未着手）。

UC-02：タスクを編集する（タイトル/期限/タグ/ステータス）。

UC-03：タスクの完了/未完を切り替える。

UC-04：タスクを削除する（確認ダイアログあり）。

UC-05：一覧をフィルタする（キーワード、タグ、期限範囲、ステータス）。

UC-06：一覧をソートする（期限昇順、作成日：新→旧/旧→新、タイトルA→Z）。

UC-07：CSVをエクスポートする（現在の全データをダウンロード）。

5. 機能要件（FR）※MoSCoW

FR-01 [Must] タスク登録：タイトル（必須）、期限（任意）、タグ（任意・カンマ区切り）、ステータス（未着手/進行中/完了）。

FR-02 [Must] タスク編集：既存タスクの各項目を更新できる。

FR-03 [Must] 完了トグル：1クリックで完了⇄未着手を切替。

FR-04 [Must] タスク削除：削除前に確認を表示。

FR-05 [Must] 一覧表示：登録順/ソート順で表形式に表示。

FR-06 [Must] フィルタ：キーワード（タイトル・タグ部分一致）、タグ（完全一致）、期限（自/至）、ステータス。

FR-07 [Must] ソート：期限昇順（未設定は最後）、作成日（降順/昇順）、タイトルA→Z。

FR-08 [Must] 期限の視覚化：期限切れ=赤、本日=強調、将来=緑系のバッジ表示。

FR-09 [Must] カウンタ：未/進/完の件数をヘッダに表示。

FR-10 [Must] 入力支援：新規フォームでEnter追加/Escクリア。

FR-11 [Should] CSVエクスポート：UTF-8、カラム固定（後述）、日付はYYYY-MM-DD。

FR-12 [Should] 編集UI：モーダルまたは行内編集で直感的に操作可能。

FR-13 [Could] フィルタ条件クリアのワンクリック操作。

FR-14 [Won’t（本バージョン外）] 通知（メール/プッシュ）、インポート、ドラッグ並び替え、PWA、タグサジェスト。

6. 画面/UX要件（UI）

UI-01 単一画面構成：上部=新規登録フォーム、中段=フィルタ/ソート、下段=一覧テーブル。

UI-02 アクセシビリティ：主要操作はキーボードで可能（Tab移動、Enter/Esc）、ariaラベル付与。

UI-03 レスポンシブ：横幅320px以上で操作可能（モバイル/PC対応）。

UI-04 状態表示：作成日時/更新日時を一覧で確認可能。

UI-05 視覚指標：ステータスをバッジで色分け、完了はタイトルに打消し線。

UI-06 フィードバック：保存/削除/エラー時に明確な通知（トーストまたは簡易メッセージ）。

7. データ要件（DR）

DR-01 保管先：localStorage（キー名は固定、例：todo_tasks_v1）。

DR-02 スキーマ（1レコード）

id: string（一意、UUID相当）

title: string（1〜200文字想定）

due: string（YYYY-MM-DD、未設定可）

tags: string[]（0件可、表示は入力順）

status: enum（todo/doing/done）

created_at: ISO8601（YYYY-MM-DDTHH:mm:ss.sssZ）

updated_at: ISO8601

DR-03 データ品質：タイトル必須、日付はブラウザ標準の<input type="date">で妥当性を担保。

DR-04 CSVカラム順：id,title,due,tags,status,created_at,updated_at（title/tagsはダブルクオートエスケープ）。

8. 非機能要件（NFR）

NFR-01 パフォーマンス：500件のタスクで主要操作（追加・編集・削除・フィルタ・ソート）が体感1秒以内、初回描画1.5秒以内（一般的PC/スマホ）。

NFR-02 可用性：サーバ不要。静的ホスティング（GitHub Pages等）で稼働。ネットワーク断でも閲覧/操作は継続（ページ読み込み済み前提）。

NFR-03 互換性：現行版の主要ブラウザで動作。IEは非対応。

NFR-04 セキュリティ/プライバシ：外部送信なし、Cookie不使用、個人情報の入力想定なし。

NFR-05 保守性：データアクセス層（Repository）を分離し、将来バックエンド差替え可能。

NFR-06 アクセシビリティ：コントラスト4.5:1以上を目標、フォーカス可視化、ラベル明示。

NFR-07 国際化/時刻：日付判定はブラウザのローカルタイムで行う（「本日」表示等）。

9. 受け入れ基準（AC）

AC-01 UC-01〜UC-07が全て1画面で実施できること。

AC-02 期限バッジ：期限切れ=赤系、本日=青系強調、未来=緑系が一覧で視認できること。

AC-03 フィルタ結果と件数表示（未/進/完カウンタ、表示件数）が一致すること。

AC-04 完了トグルや編集・削除後、一覧表示とカウンタが即時に整合すること。

AC-05 CSVダウンロードが可能で、定義したカラム順・文字コードで出力されること。

AC-06 入力バリデーション：タイトル未入力時は登録不可で明瞭なメッセージが出ること。

10. 制約・前提（CON）

CON-01 端末/ブラウザごとにデータは独立（共有不可）。

CON-02 localStorage容量上限に依存（数千件程度での運用を想定、画像/ファイルは保持しない）。

CON-03 同時編集は発生しない（単一ユーザ前提）。

CON-04 タグは文字列、重複可。フィルタの「タグ」は完全一致。

11. リスク/懸念と対策（RISK）

R-01 端末紛失・ブラウザ初期化でデータ消失 → CSVエクスポートでバックアップを促すUIを用意。

R-02 タスク増加時の描画遅延 → 仮想スクロールは本範囲外、まずは500件を性能目標に最適化。

R-03 タグの表記揺れ → 入力ヘルプ（「カンマ区切り・半角推奨」）を表示。

12. 将来要件（任意）

FUT-01 インポート（CSV）

FUT-02 PWA（オフライン完全対応/ホーム追加）

FUT-03 バックエンド差替え（Supabase/Express等）

FUT-04 通知（当日タスクのローカル通知/プッシュ）

FUT-05 E2Eテスト（Playwright）
